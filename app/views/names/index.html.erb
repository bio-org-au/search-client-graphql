<h1><%= @name_label %> Search</h1>

<%= render partial: 'names/index/search_form' %>
<hr>
<%= link_to('clear form', name_search_path,name: 'x', title: 'Clear fields and start a new name search') %> |
<%= link_to('advanced', names_advanced_search_path(link_params: params),title: 'Go to advanced name search') %> |
<%= link_to('taxonomy', taxonomy_search_path(link_params: params),title: 'Go to taxonomy search') %>
<hr>

<div id="search-results">
<% if @client_request.any_type_of_search? %>
  <% if @client_request.just_count? %>
    <%= pluralize(@search.data.name_search.count, 'matching record') %>
    for "<%= @client_request.search_term %>"
  <% else %>
    <% unless @results.present? %>
       No records for "<%= @client_request.search_term %>"
       <% elapsed = Time.now - @start_time %>(<%= elapsed.round(2) %>s)
    <% end %>
  <% end %>
<% end %>
<% if @results.present? %>
  <h2>
  <%= pluralize(@results.size,'record') %>
  for "<%= @client_request.search_term %>"
  <% unless params[:limit].to_i > @results.size %>
    out of <%= pluralize(@results.count,'matching record') %>
  <% end %>
  <% elapsed = Time.now - @start_time %>(<%= elapsed.round(2) %>s)
  </h2>

  <hr>
  <% if @client_request.details? %>
    <%= render partial: 'name_detail', locals: { search_form: 'names' } %>
  <% else %>
    <%= render partial: 'name_list', locals: { search_form: 'names' } %>
  <% end %>

  <hr>
  <% elapsed = Time.now - @start_time %>
  <%= elapsed.round(2) %> seconds (~<%= (@search.data.name_search.names.size/elapsed).round %> records/second) (index.html)
<% end %>
</div>
